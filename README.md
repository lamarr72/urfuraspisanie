# urfuraspisaniebot
Telegram-бот для получения расписания учебных групп УрФУ с поддержкой уведомлений об изменениях и напоминаний.

### Описание
Бот получает актуальное расписание с официального сайта УрФУ и предоставляет студентам способ просмотра расписания через Telegram. Основные возможности:
- Получения расписания на любую дату
- Уведомление об изменениях в расписании
- Напоминания о расписании на следующий день
- Управление уведомлениями и напоминаниями

### Команды
- `/about` - информация о боте
- `/authors` - информация об авторах
- `/help` - список всех доступных команд (может быть использован с аргументом: `/help <command>`)
- `/schedule <группа> [дд.мм]` - получить расписание для группы на указанную дату
- `/reminder [чч.мм]` - установить время напоминания о расписании на след день
- `/mute <all|schedule|reminder>` - отключить уведомления

## Реализованные задачи
### Задача 1: Базовая структура бота
Реализована заготовка чат-бота для Telegram с поддержкой команд:
- `/about` - выводит информацию о боте
- /`athors` - выводит информацию об авторах
- `/help` - выводит все доступные команды (может быть вызвана с аргументом для справки по конкретной команде)
Архитектура предусматривает автоматическое добавление новых команд в справку `/help`. Код разработан с учетом расширяемости для поддержки новых команд и диалоговых ветвей. 

### Задача 2: Парсер расписания
Разработан Java-парсер для получения расписания учебных групп УрФУ с функциональностью:
- Конвертация ID групп
- Форматирование даты, полученной от пользователя, в требуемый формат API
- Получение расписания - по внутреннему ID группы и форматированной дате получить расписание

### Задача 3: Кэширование и отслеживание изменений 
Реализована система сохранения выбранной группы и ее расписания с периодической проверкой обновлений:
- Сохранение информации о группе пользователя и ее расписания 
- Периодическое обновление расписания с использованием фоновых задач
- Определение изменений через сравнение контрольной суммы расписания (сумма кодов символов)
- Обновление кэша только при обнаружении изменение


### Задача 4: Расширение функционала команд
Добавлена поддержка расширенного функционала работы с расписанием и уведомлениями:
1. Получение расписания по дате - команда `/schedule <группа> [дд.мм]`
   - Получение расписания на конкретную дату
   - Обработка некорректного ввода даты
   - Обработка случаев, когда на дату нет пар
2. Напоминания о расписании - команда `/reminder [чч.мм]`
   - Установка времени для напоминания о расписании на следующий день
   - Отправка напоминания в заданное время
3. Управление уведомлениями - команда `mute [all|schedule|reminder]`
   - Отключение всех уведомлений (`/mute all`)
   - Отключение уведомлений об изменении расписания (`/mute shedule`)
   - Отключение напоминаний о расписании (`/mute reminder`)
4. Клавиатура команд

## Распределение задач по студентам
### Устименко:
- Задача 1:
  Базовая структура Telegram-бота
- Задача 3:
  Хранение выбранной группы пользователя и ее расписания
  Периодическое обновление расписания 
  Подсчет и сравнение контрольной суммы расписания
- Ответственность за GitHub: 
  gitignor, README

### Ваганов:
- Задача 2:
  Java-парсер расписания: конвертация ID групп, конвертация даты, запрос расписания
- Задача 4:
  Реализация клавиатуры команд
  Реализация логики `/reminder`, `/mute`, `/shedule <группа> [дд.мм]`
